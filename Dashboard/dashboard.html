<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="dashboard.title">Dashboard - Green Economy Toolkit</title>
    <meta name="description" content="Your personalized dashboard for green economy planning on the Green Economy Toolkit.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../Master Page(Header and Footer)/MasterPage.js"></script>
    <script src="../Master Page(Header and Footer)/translation.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="../main.css">
</head>
<body>
    <div id="root">
        <green-economy-header class="fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md border-b border-[hsl(var(--border))]"></green-economy-header>
        <main id="content" class="dashboard-main">
            <div id="overview-content" class="animate-fade-in">
                <div class="page-header">
                    <img src="../Images/energy-consumption-and-co2-gas-emissions-are-increasing-light-bulbs-with-green-eco-city-renewable-energy-by-2050-carbon-neutral-energy-save-energy-creative-idea-concept-generative-ai-free-photo.jpg" alt="Green Economy Landscape" loading="lazy">
                    <div class="text-overlay">
                        <h1 class="font-['Poppins'] text-3xl font-semibold" data-i18n="dashboard.overview">Dashboard Overview</h1>
                        <p data-i18n="dashboard.welcome">Welcome to your personalized Green Economy Toolkit dashboard</p>
                    </div>
                </div>
                <div class="navigation-grid">
                    <a href="../Funding Hub/Funding-Hub.html" class="nav-box">
                        <i class="fas fa-dollar-sign"></i>
                        <h3 data-i18n="dashboard.funding_hub">Funding Hub</h3>
                        <p data-i18n="dashboard.funding_hub_desc">Explore green funding opportunities.</p>
                    </a>
                    <a href="smme-directory.html" class="nav-box">
                        <i class="fas fa-building"></i>
                        <h3 data-i18n="dashboard.smme_directory">SMME Directory</h3>
                        <p data-i18n="dashboard.smme_directory_desc">Search for businesses with green credentials.</p>
                    </a>
                    <a href="toolkits.html" class="nav-box">
                        <i class="fas fa-tools"></i>
                        <h3 data-i18n="dashboard.toolkits">Toolkits</h3>
                        <p data-i18n="dashboard.toolkits_desc">Access green economy tools and resources.</p>
                    </a>
                    <a href="legal.html" class="nav-box">
                        <i class="fas fa-gavel"></i>
                        <h3 data-i18n="dashboard.legal">Legal</h3>
                        <p data-i18n="dashboard.legal_desc">View policies and terms of use.</p>
                    </a>
                    <div class="nav-box" id="open-chat-modal">
                        <i class="fas fa-robot"></i>
                        <h3 data-i18n="dashboard.ai_assistant">AI Assistant</h3>
                        <p data-i18n="dashboard.ai_assistant_desc">Interact with our AI assistant for guidance.</p>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3 data-i18n="dashboard.ai_search">AI-Enhanced Search</h3>
                        <div class="search-box">
                            <i class="fas fa-search search-input-icon"></i>
                            <input type="text" id="smart-search" data-i18n="dashboard.ai_search_placeholder" placeholder="Ask anything... (e.g., 'Find green funding opportunities')">
                            <div class="search-loader" id="search-loader"></div>
                        </div>
                        <div class="search-suggestions" id="search-suggestions"></div>
                    </div>
                </div>
            </div>
        </main>
        <button class="ai-assistance-btn" id="ai-assistance-btn" title="AI Assistance">
            <i class="fas fa-robot"></i>
        </button>
        <div id="chat-modal" class="modal">
            <div class="modal-content">
                <span class="modal-close">Ã—</span>
                <div class="chat-container">
                    <h3 data-i18n="dashboard.ai_assistant_title">AI Assistant</h3>
                    <div class="chat-messages" id="chat-messages">
                        <div class="message bot-message">
                            <div class="message-content">
                                <p data-i18n="dashboard.ai_assistant_welcome">Hey there! Ready for a green adventure at 02:14 AM SAST, July 01, 2025?</p>
                                <span class="message-time">02:14 AM</span>
                            </div>
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chat-input" data-i18n="dashboard.ai_assistant_placeholder" placeholder="Ask your AI assistant...">
                        <button id="chat-send"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </div>
        <green-economy-footer></green-economy-footer>
    </div>
    <script>
        // Sample data for AI search
        const searchData = [
            { title: "Green Energy Grant", description: "Funding for renewable energy projects.", category: "Funding", link: "#" },
            { title: "Sustainable Agriculture Fund", description: "Support for eco-friendly farming.", category: "Funding", link: "#" },
            { title: "Waste Management Initiative", description: "Grants for recycling programs.", category: "Funding", link: "#" },
            { name: "EcoTech Solutions", description: "Green Certified renewable energy firm.", category: "SMME", link: "#" },
            { name: "GreenFarm Co.", description: "Sustainable agriculture experts.", category: "SMME", link: "#" },
        ];

        // AI-Enhanced Search
        function setupSearch() {
            const searchInput = document.getElementById('smart-search');
            const searchLoader = document.getElementById('search-loader');
            const searchSuggestions = document.getElementById('search-suggestions');

            searchInput.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                searchSuggestions.innerHTML = '';
                if (query.length > 1) {
                    searchLoader.style.display = 'block';
                    setTimeout(() => {
                        searchLoader.style.display = 'none';
                        const results = searchData.filter(item => 
                            (item.title || item.name).toLowerCase().includes(query) || item.description.toLowerCase().includes(query)
                        ).slice(0, 5);
                        if (results.length > 0) {
                            searchSuggestions.style.display = 'block';
                            results.forEach(item => {
                                const suggestion = document.createElement('div');
                                suggestion.className = 'suggestion-item';
                                suggestion.innerHTML = `
                                    <span class="font-semibold">${item.title || item.name}</span>
                                    <span class="text-[hsl(var(--muted-foreground))] text-sm">(${item.category})</span>
                                    <p class="text-[hsl(var(--muted-foreground))] text-sm">${item.description}</p>
                                `;
                                suggestion.addEventListener('click', () => {
                                    searchInput.value = item.title || item.name;
                                    searchSuggestions.style.display = 'none';
                                });
                                searchSuggestions.appendChild(suggestion);
                            });
                        } else {
                            searchSuggestions.style.display = 'none';
                        }
                    }, 500);
                } else {
                    searchLoader.style.display = 'none';
                    searchSuggestions.style.display = 'none';
                }
            });

            document.addEventListener('click', (e) => {
                if (!searchInput.contains(e.target) && !searchSuggestions.contains(e.target)) {
                    searchSuggestions.style.display = 'none';
                }
            });
        }

        // Chatbot functionality
        function setupChatbot() {
            const modal = document.getElementById('chat-modal');
            const openModal = document.getElementById('open-chat-modal');
            const openAiButton = document.getElementById('ai-assistance-btn');
            const closeModal = document.querySelector('#chat-modal .modal-close');
            const chatInput = document.getElementById('chat-input');
            const chatMessages = document.getElementById('chat-messages');
            const chatSend = document.getElementById('chat-send');

            openModal.addEventListener('click', () => modal.style.display = 'flex');
            openAiButton.addEventListener('click', () => modal.style.display = 'flex');
            closeModal.addEventListener('click', () => modal.style.display = 'none');
            window.addEventListener('click', (e) => {
                if (e.target === modal) modal.style.display = 'none';
            });

            chatSend.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && chatInput.value.trim()) sendMessage();
            });

            function sendMessage() {
                if (chatInput.value.trim()) {
                    const userMessage = document.createElement('div');
                    userMessage.className = 'message';
                    userMessage.innerHTML = `<div class="message-content"><p>${chatInput.value}</p><span class="message-time">${new Date().toLocaleTimeString()}</span></div>`;
                    chatMessages.appendChild(userMessage);
                    chatInput.value = '';

                    setTimeout(() => {
                        const botMessage = document.createElement('div');
                        botMessage.className = 'message bot-message';
                        botMessage.innerHTML = `<div class="message-content"><p>Great choice! "${chatInput.value}" â€“ check the squares! ðŸŒ¿</p><span class="message-time">${new Date().toLocaleTimeString()}</span></div>`;
                        chatMessages.appendChild(botMessage);
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 500);
                }
            }
        }

        // Initialize
        setupSearch();
        setupChatbot();
    </script>
</body>
</html>